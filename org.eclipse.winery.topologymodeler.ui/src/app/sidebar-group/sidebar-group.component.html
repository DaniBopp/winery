<!--
   * Copyright (c) 2017-2018 Contributors to the Eclipse Foundation
   *
   * See the NOTICE file(s) distributed with this work for additional
   * information regarding copyright ownership.
   *
   * This program and the accompanying materials are made available under the
   * terms of the Eclipse Public License 2.0 which is available at
   * http://www.eclipse.org/legal/epl-2.0, or the Apache Software License 2.0
   * which is available at https://www.apache.org/licenses/LICENSE-2.0.
   *
   * SPDX-License-Identifier: EPL-2.0 OR Apache-2.0
   -->
<div id="NTPropertiesView"
     class="sidebar-root"
     style="display: block;"
     [@sidebarAnimationStatus]="sidebarAnimationStatus"
     *ngIf="groupSidebarState.sidebarVisible">

    <!-- Repaint jsPlumb on every accordion click -->
    <accordion #accordion *ngFor="let group of groupSidebarState.groups">
        <!-- Groups -->
        <accordion-group
            class="card-header-node-accordions"
            #groups
            panelClass="accordionGroupPanel" >
            <div accordion-heading (click)="setGroupSelected(group)">
                {{ group.name }}:{{ group.groupType }}
            </div>

            <div id="groupInformationSection">
                <table class="grouped-nodes-table">
                    <tbody>
                    <tr>
                        <span>Id: {{ group.id }}</span>
                    </tr>
                    <tr>
                        <span>Name: {{ group.name }}</span>
                    </tr>
                    <tr class="grouped-nodes-table-td">
                        <span>Type: {{ group.groupType }}</span>
                    </tr>

                    </tbody>
                </table>
            </div>

            <div *ngIf="!group.properties"
                 style="display: flex; justify-content: center; align-items: center">
                <i class="fa fa-3x fa-refresh fa-spin" style="max-width: 50%;"></i>
            </div>
            <table *ngIf="group.properties.kvproperties" class="table table-border--grey table-sm body-table">
                <tr>
                    <th>
                        Key
                    </th>
                    <th>
                        Values
                    </th>
                <div *ngFor="key in group.properties.kvproperties">

                <tr>
                    <td class="">{{key}}</td>
                    <td class="">
                    <textarea
                        style="width:100%; overflow-y: scroll;"
                        rows="1"
                        placeholder="Edit your value here."
                        required
                        [disabled]="readonly"
                        value="{{value}}"
                        (keyup)="properties.next($event.target.value)"
                        (keyup)="keyOfEditedKVProperty.next(key)">
                    </textarea>
                    </td>
                </tr>
</div>
            </table>

            <div *ngIf="group.properties.any">
                <textarea
                    style="width:100%; overflow-y: scroll;"
                    rows="6"
                    placeholder="Edit your XML here."
                    required
                    [disabled]="readonly"
                    value="{{group.properties.any}}"
                    (keyup)="properties.next($event.target.value)">
                </textarea>
            </div>


            <div id="nodeTemplateGroupInformationSection">
                <table class="grouped-nodes-table">
                    <tbody>
                    <tr *ngFor="let node of group.nodeTemplates">
                        <td class="grouped-nodes-table-td">
                            <span>{{ node.id }}</span>
                        </td>
                    </tr>
                    </tbody>
                </table>

            </div>
        </accordion-group>
    </accordion>
</div>
